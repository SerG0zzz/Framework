не понтяна такая конструкция, что она именно возвращвет?
вернее не понятен синтаксис (*/каклй-то код*/)(*/каклй-то код*/)
отдельные фигурные скобки.

return ($this->nextAction)($request->withAttribute('username', $username));

-----------------------------------------------------
